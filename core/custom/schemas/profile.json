{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://tmi-platform.org/schemas/profile.json",

  "definitions": {
    "uei": {"$ref": "http://minimi.org/schemas/fields.json#/definitions/uei"},
    "reference": {"$ref": "http://tmi-platform.org/schemas/fields.json#/definitions/reference"},

    "type": {
      "allOf": [
        {"$ref": "#/definitions/reference"},
        {"enum": ["collective", "user"]}
      ]
    }
  },

  "type": "object",
  "title": "Profile",

  "properties": {
    "id": {"$ref": "#/definitions/uei"},
    "owner": {
      "type": "object",
      "properties": {
        "type": {"$ref": "#/definitions/type"},
        "id": {"$ref": "#/definitions/uei"}
      }
    },
    "fields": {"$ref": "#/definitions/schemaReference"}
  }
}